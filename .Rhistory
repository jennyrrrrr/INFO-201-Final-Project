p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent..Undernourished., color = ~Percent Undernourished, colors = 'Blues',
text = ~Entity., locations = ~Code., marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
undernourished_df <- read.csv("data/prevalence-of-undernourishment.csv")
colnames(undernourished_df)[colnames(undernourished_df)=="Prevalence.of.undernourishment....of.population.....of.population."] <- "Percent_Undernourished"
p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Blues',
text = ~Entity, locations = ~Code., marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Blues',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
View(p)
p
p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Redss',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
p
View(imp_exp_df)
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area) %>%
summarize("element" == "Element") %>%
View()
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area) %>%
summarize("element" = "Element") %>%
View()
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area) %>%
summarize("element" = Element) %>%
View()
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area) %>%
group_by(Element) %>%
summarize(Year, Value = sum(Value), Item)
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area) %>%
group_by(Element) %>%
summarize(Year = mean(Year), Value = sum(Value), Item)
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area) %>%
group_by(Element) %>%
summarize(Year = mean(Year), Value = sum(Value))
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area) %>%
group_by(Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
View()
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value))
library(dplyr)
library(plotly)
library(ggplot2)
hunger_index_df <- read.csv("data/global-hunger-index.csv")
undernourished_df <- read.csv("data/prevalence-of-undernourishment.csv")
colnames(undernourished_df)[colnames(undernourished_df)=="Prevalence.of.undernourishment....of.population.....of.population."] <- "Percent_Undernourished"
imp_exp_df <- read.csv("data/FAOSTAT_data_11-13-2019.csv")
# geo styling
l <- list(color = toRGB("grey"), width = 0.5)
# specify map projection/options
geo <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
p
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value))
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
View()
imp_exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
View()
imp_exp_df <- read.csv("data/FAOSTAT_data_11-13-2019.csv")
# geo styling
l <- list(color = toRGB("grey"), width = 0.5)
# specify map projection/options
geo <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
p
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
vie
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value))
View(modified_imp_exp_df)
modified_imp_exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Export Value Base Quantity")
View(modified_imp_exp_df)
exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Export Value Base Quantity")
View(exp_df)
imp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Import Value Base Quantity")
View(imp_df)
View(imp_exp_df)
exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Export Value Base Quantity")
View(exp_df)
imp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Import Value Base Quantity")
View(imp_df)
imp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Import Value Base Period Quantity")
modified_imp_exp_df <- merge(exp_df,imp_df)
View(imp_df)
modified_imp_exp_df <- merge(exp_df,imp_df, by = "Area")
View(modified_imp_exp_df)
modified_imp_exp_df <- merge(exp_df,imp_df, by = "Area")
colnames(undernourished_df)[colnames(undernourished_df)=="Value.x"] <- "Export.Value"
hunger_index_df <- read.csv("data/global-hunger-index.csv")
undernourished_df <- read.csv("data/prevalence-of-undernourishment.csv")
colnames(undernourished_df)[colnames(undernourished_df)=="Prevalence.of.undernourishment....of.population.....of.population."] <- "Percent_Undernourished"
imp_exp_df <- read.csv("data/FAOSTAT_data_11-13-2019.csv")
# geo styling
l <- list(color = toRGB("grey"), width = 0.5)
# specify map projection/options
geo <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
p
exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Export Value Base Quantity")
imp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Import Value Base Period Quantity")
modified_imp_exp_df <- merge(exp_df,imp_df, by = "Area")
colnames(modified_imp_exp_df)[colnames(modified_imp_exp_df)=="Value.x"] <- "Export.Value"
colnames(modified_imp_exp_df)[colnames(modified_imp_exp_df)=="Value.y"] <- "Import.Value"
View(modified_imp_exp_df)
undernourished_p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
undernourished_p
geo <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
exports_p <- plot_geo(modified_imp_exp_df) %>%
add_trace(
z = ~Export.Value, color = ~Export.Value, colors = 'Greens',
text = ~Area, locations = ~Area, marker = list(line = l)
) %>%
colorbar(title = 'Export Value Quantity', tickprefix = '$') %>%
layout(
title = 'Exports in 2017',
geo = geo
)
exports_p
exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value), Code = Area.Code) %>%
filter(Element == "Export Value Base Quantity")
exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value), Code = mean(Area.Code)) %>%
filter(Element == "Export Value Base Quantity")
View(exp_df)
imp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value), Code = mean(Area.Code)) %>%
filter(Element == "Import Value Base Period Quantity")
modified_imp_exp_df <- merge(exp_df,imp_df, by = "Area")
View(modified_imp_exp_df)
modified_imp_exp_df <- merge(exp_df,imp_df, by = "Area")
colnames(modified_imp_exp_df)[colnames(modified_imp_exp_df)=="Value.x"] <- "Export.Value"
colnames(modified_imp_exp_df)[colnames(modified_imp_exp_df)=="Value.y"] <- "Import.Value"
geo <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
exports_p <- plot_geo(modified_imp_exp_df) %>%
add_trace(
z = ~Export.Value, color = ~Export.Value, colors = 'Greens',
text = ~Area, locations = ~Code.x, marker = list(line = l)
) %>%
colorbar(title = 'Export Value Quantity', tickprefix = '$') %>%
layout(
title = 'Exports in 2017',
geo = geo
)
exports_p
install.packages(ggmap)
install.packages('ggmap')
library(ggmap)
geocode(modified_imp_exp_df$Area)
install.packages('countrycode')
library(countrycode)
countrycode(modified_imp_exp_df$Area, 'country.name', 'genc3c')
exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Export Value Base Quantity")
imp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Import Value Base Period Quantity")
modified_imp_exp_df <- merge(exp_df,imp_df, by = "Area")
colnames(modified_imp_exp_df)[colnames(modified_imp_exp_df)=="Value.x"] <- "Export.Value"
colnames(modified_imp_exp_df)[colnames(modified_imp_exp_df)=="Value.y"] <- "Import.Value"
modified_imp_exp_df$Code <- countrycode(modified_imp_exp_df$Area, 'country.name', 'genc3c')
exports_p <- plot_geo(modified_imp_exp_df) %>%
add_trace(
z = ~Export.Value, color = ~Export.Value, colors = 'Greens',
text = ~Area, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Export Value Quantity', tickprefix = '$') %>%
layout(
title = 'Exports in 2017',
geo = geo
)
exports_p
undernourished_p
shiny::runApp('Hungry_App')
library(dplyr)
library(plotly)
library(ggplot2)
library(ggmap)
library(countrycode)
hunger_index_df <- read.csv("data/global-hunger-index.csv")
undernourished_df <- read.csv("data/prevalence-of-undernourishment.csv")
colnames(undernourished_df)[colnames(undernourished_df)=="Prevalence.of.undernourishment....of.population.....of.population."] <- "Percent_Undernourished"
imp_exp_df <- read.csv("data/FAOSTAT_data_11-13-2019.csv")
# geo styling
l <- list(color = toRGB("grey"), width = 0.5)
# specify map projection/options
geo <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
undernourished_p <- plot_geo(undernourished_df) %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
undernourished_p
runApp('Hungry_App')
View(hunger_index_df)
View(hunger_index_df)
View(hunger_index_df)
exp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Export Value Base Quantity")
imp_df <- imp_exp_df %>%
group_by(Area, Element) %>%
summarize(Year = mean(Year), Value = sum(Value)) %>%
filter(Element == "Import Value Base Period Quantity")
modified_imp_exp_df <- merge(exp_df,imp_df, by = "Area")
colnames(modified_imp_exp_df)[colnames(modified_imp_exp_df)=="Value.x"] <- "Export.Value"
colnames(modified_imp_exp_df)[colnames(modified_imp_exp_df)=="Value.y"] <- "Import.Value"
modified_imp_exp_df$Code <- countrycode(modified_imp_exp_df$Area, 'country.name', 'genc3c')
geo <- list(
showframe = FALSE,
showcoastlines = FALSE,
projection = list(type = 'Mercator')
)
exports_p <- plot_geo(modified_imp_exp_df) %>%
add_trace(
z = ~Export.Value, color = ~Export.Value, colors = 'Greens',
text = ~Area, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Export Value Quantity', tickprefix = '$') %>%
layout(
title = 'Exports in 2017',
geo = geo
)
exports_p
source("analysis.R")
runApp('Hungry_App')
runApp('Hungry_App')
runApp()
runApp()
runApp()
View(undernourished_df)
undernourished_p <- function(year) {
undernourished_df %>%
filter(Year = year) %>%
plot_geo() %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
}
undernourished_p
undernourished_p(2000)
undernourished_p <- function(year) {
undernourished_df %>%
filter(Year == year) %>%
plot_geo() %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = 'Undernourishment in the World',
geo = geo
)
}
undernourished_p(2000)
runApp()
undernourished_p <- function(year) {
undernourished_df %>%
filter(Year == year) %>%
plot_geo() %>%
add_trace(
z = ~Percent_Undernourished, color = ~Percent_Undernourished, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Percent of Population', tickprefix = '%') %>%
layout(
title = paste("World Undernourishment in", year),
geo = geo
)
}
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
exports_p <- function(){
plot_geo(modified_imp_exp_df) %>%
add_trace(
z = ~Export.Value, color = ~Export.Value, colors = 'Greens',
text = ~Area, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Export Value Quantity', tickprefix = '$') %>%
layout(
title = 'Exports in 2017',
geo = geo
)
}
runApp()
runApp()
runApp()
runApp()
runApp()
# ======================================================
# Global number of people who are undernourished line graph.
# ======================================================
globalrates_p <- function() {
p1 <- ggplot() +
geom_line(aes(
y = Number.of.people.undernourished..FAO.SOFI..2018....World.Bank..2017..,
x = Year), data = undernourished.data) +
scale_x_continuous(breaks=seq(1991,2017,2)) +
scale_y_continuous(labels = scales::comma)
theme(text=element_text(family="Tahoma"))
p1 + labs(title = "Global Number of People Who Are Undernourished", x = "Year", y = "Amount of People", caption = "Source: UN FAO (2018); UN FAO (2017); World Bank (2017)")
}
runApp()
runApp()
View(hunger_index_df)
View(hunger_index_df)
hungerindex_p <- function(year) {
hunger_index_df %>%
filter(Year == year) %>%
plot_geo() %>%
add_trace(
z = ~Global.Hunger.Index, color = ~Global.Hunger.Index, colors = 'Reds',
text = ~Entity, locations = ~Code, marker = list(line = l)
) %>%
colorbar(title = 'Hunger Index') %>%
layout(
title = paste("Hunger Index in ", year),
geo = geo
)
}
runApp()
runApp()
runApp()
runApp()
View(undernourished.data)
world_undernourished_df <- read.csv("data/undernourished.csv",
stringsAsFactors = FALSE)
colnames(undernourished_df)[colnames(undernourished_df) == "Number.of.people.undernourished..FAO.SOFI..2018....World.Bank..2017.."] <- "Number_Undernourished"
# ======================================================
# Read in data
# ======================================================
undernourished_df <- read.csv("data/prevalence-of-undernourishment.csv")
colnames(undernourished_df)[colnames(undernourished_df) == "Prevalence.of.undernourishment....of.population.....of.population."] <- "Percent_Undernourished"
imp_exp_df <- read.csv("data/FAOSTAT_data_11-13-2019.csv")
world_undernourished_df <- read.csv("data/undernourished.csv",
stringsAsFactors = FALSE)
colnames(world_undernourished_df)[colnames(world_undernourished_df) == "Number.of.people.undernourished..FAO.SOFI..2018....World.Bank..2017.."] <- "Number_Undernourished"
View(imp_exp_df)
View(modified_imp_exp_df)
runApp()
runApp()
runApp()
modified_imp_exp_df$imp_exp_difference <- modified_imp_exp_df$Export.Value - modified_imp_exp_df$Import.Value
View(modified_imp_exp_df)
runApp()
runApp()
